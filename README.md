# WellnessDash

Offline-first nutrition tracking with optional Supabase sync, external food search (OpenFoodFacts), and optional AI meal ideas.

## Quick start

1. Install deps: `npm i`
2. Run dev: `npm run dev`

## Supabase Integration

This app works offline-first using IndexedDB via Dexie. If you add Supabase credentials, it will mirror newly created items (foods, diary entries, recipes, meal plans) to Supabase.

1. Create a Supabase project and get the URL and anon key.
2. Create a `.env` (or `.env.local`) with:

```
VITE_SUPABASE_URL=your_supabase_url
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key
```

3. In Supabase, create tables (SQL):

```sql
create table public.foods (
  id bigint generated by default as identity primary key,
  name text not null,
  brand text,
  tags text[] default '{}',
  per100g jsonb not null,
  servings jsonb default '[]',
  verified boolean default false,
  inserted_at timestamp with time zone default now()
);

create table public.diary_entries (
  id bigint generated by default as identity primary key,
  date text not null,
  meal text not null,
  foodid bigint,
  customname text,
  servinglabel text,
  grams double precision,
  quantity double precision,
  overrides jsonb,
  price double precision,
  inserted_at timestamp with time zone default now()
);

create table public.recipes (
  id bigint generated by default as identity primary key,
  name text not null,
  description text not null,
  category text not null,
  preptime double precision,
  cooktime double precision,
  servings double precision not null,
  instructions text not null,
  tags text[] default '{}',
  ingredients jsonb not null,
  nutrition jsonb not null,
  createdat text not null,
  inserted_at timestamp with time zone default now()
);

create table public.meal_plans (
  id bigint generated by default as identity primary key,
  date text not null,
  meal text not null,
  recipeid bigint,
  customname text,
  servings double precision,
  notes text,
  inserted_at timestamp with time zone default now()
);
```

Row Level Security: for quick testing you can disable RLS or add policies to allow anon insert/upsert from your domain.

## External Food Database (OpenFoodFacts)

Food search now falls back to OpenFoodFacts (public, no key). External results are merged into local search. Selecting an external result saves it locally and attempts to upsert to Supabase if configured.

## AI Meal Ideas (Optional)

You can enable AI features without a paid key by using OpenRouter free tiers or Groq community access.

Add to your `.env` (one or both):

```
VITE_OPENROUTER_API_KEY=sk-or-...
VITE_GROQ_API_KEY=gsk_...
```

Then use the "AI meal plan ideas" button in the weekly planner.
